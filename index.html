<!DOCTYPE html>
<html>
  <head>
    <title>Happy Easter</title>
    <script src="https://unpkg.com/parse/dist/parse.min.js"></script>
    <script>
      Parse.initialize('be4a2836d3d1cbad5cc0911fa2147d02e25b277c', 'adf9343dfkfd');
      Parse.serverURL = 'https://www.jabuwings.com/api';
      
    </script>
  </head>
<body>
<h1>Happy Easter Celebration</h1>
  <p>Your phone number will be credited with 50 naira everytime you click the button below until the party ends.. ;)</p>
  <div id="form">
  <input id="phone"/>
    <label for="phone">Enter your phone number</label>
    
    <button id="button" onclick="get()">Get your free credit</button>
  </div>
  <p id="oops"></p>
  <p id="loading" style="display:none">Please Wait</p>
         <p id="success" style="display:none">Oya..... You are one the lucky ones. Congratulations. Please refresh the page to try again.</p>
  
  <script>
          var getting = false;
         function get(){
           if(!getting){
              document.getElementById('loading').style.display = 'block'; 
             document.getElementById('button').style.display = 'none';
             var phone = document.getElementById('phone').value;
            Parse.Cloud.run('jamesbirthdaypromo',{phone: phone}).then(function(response){
              document.getElementById('loading').style.display = 'none'; 
              document.getElementById('success').style.display = 'block'; 
              document.getElementById('form').style.display= 'none';
            }).catch(function(e){
              document.getElementById('button').style.display = 'block';
              document.getElementById('loading').style.display = 'none'; 
                document.getElementById('oops').innerText=e.message;
            });
           }
          
         
         }

  </script>
</body>
</html>
